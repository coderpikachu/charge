<!DOCTYPE html>  
<html lang="en">  
    <head>  
        <meta charset="UTF-8">  
        <title>Dormitory Records</title>  
         {% load static %}  
         <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static 'css/style.css' %}"/>  
    </head>  
    <body>  
        {%include 'pages/navbar.html'%}
        <center>
        <form method="GET" class="post-form" action='.'>  
            <div class="form-group">
                {% csrf_token %}  
            {% for field in filter.form %}
                <fieldset class="form-group">
                    <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                    <div class="controls">
                        {{ field }}
                        <!-- <p class="help-text">{{ field.help_text }} </p> -->
                    </div>
                </fieldset>
            {% endfor %}

            <div class="form-group">  
                <label class="col-form-label"></label>  
                <div>  
                    <button type="submit" class="btn btn-primary">Search</button>  
                </div>  
            </div>  

            </div>
        </form> 
        </center>
        <table class="table table-striped table-bordered table-sm">  
            <thead class="thead-light">
                <tr>  
                    <th>ID</th>  
                    <th>PeopleNum</th>  
                    <th>AccommodationCharge</th>  
                    <th>Telephone</th>  
                    <th>FlatId</th>  
                    <th>Operation</th>
                </tr>  
            </thead>  
            <tbody>  
            {% for dormi in filter.qs %}  
                <tr>  
                    <td class="id">{{ dormi.dId }}</td>  
                    <td>{{ dormi.peopleNum }}</td>  
                    <td>{{ dormi.accommodationCharge }}</td>  
                    <td>{{ dormi.telephone }}</td>  
                    <td>{{ dormi.flatId.fId }}</td>
                    <td>  
                        <center>
                        <a class="btn btn-info edits" href="../../dormitory/edit/{{ dormi.dId }}/" role="button" >Edit</a> 
                        <a class="btn btn-warning deletes" href="../../dormitory/delete/{{ dormi.dId }}/" role="button">Delete</a>
                        </center>  
                    </td>  
                </tr>  
            {% endfor %}  
            </tbody>  
        </table>  
        
        <center>
            <a href="../../dormitory/dor/ " style="margin-right: 60px" class="btn btn-primary">Add New Record</a>
            <a href="../../home/" class="btn btn-secondary">Back To Home</a>
        </center>  
        <br>
        <br>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <!-- <script type="text/javascript" src="{%static 'js/permission.js'%}">
        </script> -->
        <script type="text/javascript"> 
       var a = "{{types}}";
       console.log(a);
       console.log("connected") 
        var id="{{my_id}}";
        console.log(id.key)
        console.log(id)
        console.log($('.edits'))
        console.log($('.user').text().slice(6))
        editButton=$('.edits')
        deleteButton=$('.deletes')
        idE=$('.id')
        for (var i = 0; i < editButton.length; i++) {
            if(idE.eq(i).text()!='11'){
                editButton.eq(i).addClass('disabled')
                deleteButton.eq(i).addClass('disabled')
            }
        }

        </script>
    </body>  
</html>  